# もう怖くないLinuxコマンド。手を動かしながらLinuxコマンドラインを5日間で身に付けよう

## 01 コースについて

- コースの特徴
  - Linuxの仕組みや考え方を学ぶ
  - 実際に手を動かしながら習得する

- 講座の対象
  - Linuxをこれから学びたいと考えている方
  - コマンドラインでの操作が苦手でこれからできるようになりたいと考えている方

---

## 02 Linuxとは

LinuxはOSの一種  
コンピュータを動かすための基本ソフト  
サーバ用、組み込み用など幅広い用途で使われている  

- 主なOSの種類
  - Windows
  - Mac OS X
  - Android
  - Linux

### Linuxの歴史

- 1970年頃
  - UnixというOSが誕生
  - シンプルな小さいOSで大学や研究所を中心に普及
  - 有料。ライセンス縛りも厳しい
- 1985年頃
  - オープンソース版のUnixを開発するプロジェクトがスタート
  - ソースコードも公開されていたので、様々な派生版のUnixが誕生
- 1991年頃
  - 当時大学生のりーナス・トーパルズがLinuxを開発しオープンソース化
  - Unixを真似て、いちからOSを作る
  - 最終的に最も普及
- 有料のUnixが、Linuxという形で、無料で使えるようになった

### Linuxはどこで使われているのか

- サーバ
- 組み込み
- デスクトップ

### Linuxの特徴と欠点

- 特徴
  - オープンソースなので誰でも自由に使える
  - 世界中で使われていて信頼性が高い
  - 品質の高い多くのソフトウェアが利用できる
  - 自動化するための仕組みがあり、サーバの運用が行いやすい
- 欠点
  - 商用アプリケーションがあまり存在しない
    - マイクロソフトオフィスが動作しない
    - 画像、音楽、動画などのマルチメディア系ファイルを編集するのが苦手
  - 日本語対応されていない部分が多い

### <02 まとめ>

- LinuxとはOSがの一種で、コンピュータを動かすための基本ソフト
- 1991年にリーナス・トーパルズがUnixをベースに一から開発
- 現在では大変普及しており、サーバ、組み込み、デスクトップといった幅広い用途で使われている
- 特徴
  - オープンソースなので誰でも自由に使える
  - 品質の高い多くのソフトウェアが利用できる
- 欠点
  - 商用アプリケーションがあまり存在しない
  - 日本語対応されていない部分が多い

---

## 03 なぜLinuxを学ぶのか

Linuxは枯れている技術であり、何年たっても使える技能を得ることができる

- 幅広い場所で使われている
  - サーバ用
  - 組み込み器用
- 長年使える
  - Linuxの技術は長い時間をかけて多くのユーザに検証された結果、大きく変更する必要がなくなっている
  - 技術が枯れている
  - 一度習得すれば何年たっても使える

---

## 04 Linuxディストリビューションとは

- カーネル  
  - OSの中核となるソフトウェア
- ディストリビューション  
  - カーネルにいろいろなソフトウェアを組み合わせて使いやすくしたもの
  - 1,000種類以上あり、独自のコミュニティが開発している
    - Red Hat系
      - Red Hat Enterprise Linux
      - CentOS・・・本講座で使用 無償で手に入り情報も豊富
      - Fedora
    - Debian系
      - Debian GNU/Linux
      - Ubuntu

### <04 まとめ>

- カーネルはOSの中核となるソフトウェア
- ディストリビューションはカーネルに色々なソフトウェアを組み合わせて使いやすくしたもの
- ディストリビューションは1,000種類以上あり、独自のコミュニティが開発している
- Red Hat系とDebian系が主流

---

## 05 シェルとは

LinuxのCLIを提供するソフトウェア  
ユーザとLinuxカーネルの仲介役（カーネルのインターフェイス）をしている  
※CLIとは、キーボードからコマンドを入力し、文字列として結果を出力するインターフェイス

### シェルの画面

ユーザー名、ホスト名、プロンプトがシェルでは表示されている  
プロンプトは「コマンド入力を待ってるから、コマンド入力していね」というシェルが待っている記号

```bash
[yamaura@localhost ~] $
```

### シェルの仕組み

コマンドを入力すると実行結果が出力される  

1. ユーザがプロンプトにコマンドを打つ
2. シェルが入力された名前のコマンドを探す
3. Linuxカーネルが見つかったコマンドを実行する
4. シェルが実行結果を画面に表示する

プロンプトの「$」は入力してなくてよい  
ユーザが打ち込む場所とコンピュータが表示してくれる場所を見分けるのに、この書き方が便利なので慣習的にかかれている  

```bash
$date

2019年8月2日 金曜日 20:39:41 UTC
```

### Linuxを操作するときはターミナルにコマンドを入力する

ターミナルは入出力の画面を提供するソフトウェア  
ターミナルとシェルは別物なので注意！  
ターミナルの中でシェルが動いている  

- ターミナルは画面を担当するソフトウェア
- シェルはコマンドを解釈するソフトウェア

### シェルの種類

- sh
  - もっとも古いシェル
  - ほぼ全てのUnixで利用できる標準的なシェル
  - 機能は少ない
- bash
  - shを基本として機能を拡張したシェル
  - Linux環境でデフォルトのログインシェル
  - 学習で使うならbashがおすすめ
- zsh
  - bashの機能を取り込み、独自の拡張も追加
  - 機能の豊富なシェル
  - 講師はzshを使用

### <05 まとめ>

- シェルはLinuxのCLIを提供するソフトウェア
- プロンプトは「コマンド入力を待ってるから、コマンド入力してね」というシェルが待っている記号
- ターミナルは入出力の画面を提供するソフトウェア。ターミナルとシェルは別物なので注意
- シェルの種類には、sh、bash、zshなどがある
- カーネルとシェルが分かれていたり、シェルとターミナルが分かれているように、Linuxは「1つのプログラムには1つのことをうまくやらせる」「色々な機能をできるだけ細かく切り分けて作る」という設計思想がある

---

## 06 VirtualBoxをインストールしよう

### Linux環境を用意する

コンピュータ上に仮想マシンを構築できるVirtualBoxを利用して、学習用のLinux環境を用意する  

### VirtualBoxのインストール手順

- インストール手順
  1. Oracle VM VirtualBoxのインストール
     <https://www.virtualbox.org/>  
  2. CentOSのイメージファイルのダウンロード
     <https://www.centos.org/>  
     DVDISOファイルをDL  
     JPとあるところのミラーから落とす（とても重い）  
  3. Oracle VM VirtualBoxで仮想マシンを作成
  4. 仮想マシンを起動し、CentOSをインストール

>MacにUbuntu入れて動かすことにしたのでこちらの手順は対応しなかった

---

## 07 コマンドを打ってみよう

### 今回学ぶこと

- VirtualBoxの画面を拡大して表示
- dateコマンドで現在時刻を表示

### dateコマンド

現在時刻を表示させるコマンド

```bash
$date
```

---

## 08 シェルの便利機能

### カーソルの移動

| コマンド | 内容 |
| :--- | :--- |
| Command + f | 一文字次へ移動 |
| Command + b | 一文字前へ移動 |
| Command + a | 行の先頭に移動 |
| Command + e | 行の最後に移動 |
| Meta + f(esc + f) | 一単語次へ移動 |
| Meta + b(esc + b) | 一単語前へ移動 |

### 文字列の編集

| コマンド | 内容 |
| :--- | :--- |
| Command + h | カーソルの左を一文字削除 |
| Command + d | カーソル部分を一文字削除 |
| Command + w | カーソル位置の単語を削除（カーソルの前部分） |
| Command + u | カーソルの位置から行頭まで削除 |
| Command + k | カーソルの位置から行末まで削除 |
| Command + y | 最後に削除した内容を挿入 |

### トラブル時の対応

| コマンド | 内容 |
| :--- | :--- |
| Command + c | 実行中のコマンドを強制終了 |
| Command + l | 画面の消去。文字化けした時のクリアにも使える |
| Command + s | 画面表示のロック（キーボードから文字の入力を受け付けない） |
| Command + q | 画面表示のロックの解除 |

### 補完・コマンド履歴

| コマンド | 内容 |
| :--- | :--- |
| Tab | コマンドやパスの補完 |
| Command + p、または↑キー | 一つ前の履歴を見る |
| Command + n、または↓キー | 一つ後ろの履歴を見る |
| Command + r | コマンド履歴のインクリメンタル検索 |
| 文字の入力 | コマンド履歴から検索 |
| Command + r | 一つ前の検索結果へ移動 |
| Enterキー | 現在の検索結果を実行 |
| Escキー | 現在の検索結果を表示したままコマンドラインに戻る |
| Command + g | 検索結果を破棄し、コマンドラインに戻る |

---

## 09 Day1のまとめ

### できるようになったこと

- Linuxの概要を理解
- Linuxディストリビューションについて理解
- シェルの概要を理解
- Linux環境を構築し、コマンドを実行できるようになった
- シェルでのショートカットによる時間短縮

### やってみよう

- ターミナルで次のコマンドを実行してください。端末が沈黙するので、Command + Cでコマンドの実行を中止してください。

  ```bash
  # 100秒間停止させるコマンド
  $sleep 100
  ```

- ターミナルで次のコマンドを実行して、カレンダーを表示させてください。
  
  ```bash
  # 2019年のカレンダーを表示させる
  $cal 2019

  # 2019年1月のカレンダーを表示させる
  $cal 1 2019
  ```

- calコマンドを使って①2020年12月25日の曜日を調べてください。②西暦20000年7月1日の曜日を調べてください。
  
  ```bash
  # ①の入力内容
  $cal 12 2020

  # ②の入力内容（しかしエラーが出る　正しい）
  $cal 7 20000
  ```

---

## 10 Day2のゴール

### Day2.ディレクトリを操作しよう

- Day2のゴール
- ディレクトリを操作してみよう
- ディレクトリの構造を学ぼう
- 【cdコマンド】ディレクトリを移動しよう
- 【pwdコマンド】カレントディレクトリを表示しよう
- 【lsコマンド】ディレクトリの中身を表示しよう
- 【mkdirコマンド】ディレクトリを作成しよう
- 【rmdirコマンド】ディレクトリを削除しよう
- パスについて学ぼう

### Day2のゴール

- Linuxでデータを格納する仕組み（ディレクトリ）を理解すること
- ディレクトリをコマンドを使って操作できるようになること
  - 【cdコマンド】ディレクトリの移動
  - 【pwdコマンド】カレントディレクトリの表示
  - 【lsコマンド】ディレクトリの中身の表示
  - 【mkdirコマンド】ディレクトリの作成
  - 【rmdirコマンド】ディレクトリの削除

---

## 11 ディレクトリを操作してみよう

まずさわってみる

```bash

# スラッシュディレクトリに移動
$cd /

# 今いるディレクトリを調べる
$pwd

# ディレクトリの中を確認する
$ls

# homeディレクトリへ移動
$cd home

# 今いるディレクトリを調べる
$pwd

# homeディレクトリの中を確認する
$ls
```

---

## 12 ディレクトリの構造を学ぼう

### ディレクトリってなに

ディレクトリはファイルが保存されている場所  
WindowsやMacのフォルダと同じ概念  
ディレクトリは入れ子構造になっている  

### Linuxのディレクトリ構造

ルートディレクトリを頂点とした階層構造になっている。  
これを「ディレクトリーツリー（木の根っ子）」と呼ぶ。  
一番上の「/」をルートディレクトリと呼ぶ。

### Windowsとの違い

Windowsはドライブから入れ子構造が始まる。  
Linuxは一つのディレクトリ（/）から始まる。  

- Windows：ディスクが2つあると、2つのディレクトリーツリーができる
- Linux：複数ディスクがあると、ルートディレクトリ配下にディレクトリとしてくっつける。この操作を「マウント」と呼ぶ。  

### 主要なディレクトリの役割

- /bin（スラッシュビン）
  - 一般ユーザおよび管理ユーザの両方が使用するコマンドの実行ファイルを格納
  - 特にLinuxの動作に最低限必要な重要度の高いコマンドの実行ファイルを格納
- /dev（スラッシュデブ）
  - デバイスファイル（ハードウェアをファイルとして扱えるようにしたファイル）を格納
- /etc（スラッシュエトセ）
  - 設定ファイルを格納
  - Linuxで動作するアプリケーションの設定ファイルや、Linux自体の設定に関わるファイルが置かれている
- /home（スラッシュホーム）
  - ホームディレクトリ（Linuxのユーザごとに割り当てられる個人用ディレクトリ）が配置される
  - ユーザーはホームディレクトリ内に自由にファイルやディレクトリを作成できる
- /sbin（スラッシュエスビン)
  - 管理者ユーザ向けのコマンドの実行ファイルを格納
- /tmp（スラッシュテンプ）
  - 一時的なファイルを格納
  - アプリケーションの実行中に結果を一時的にファイルとして保存する場合に使用
- /usr（スラッシュユーザ）
  - 各種アプリケーションと、それに付随するファイルを格納
- /var（スラッシュバー）
  - 変化するデータを格納
  - アプリケーションを動作する上で作成されたログなどを格納

### <12 まとめ>

- ディレクトリはファイルが保存されている場所
- ルートディレクトリを頂点とした階層構造になっていて、「ディレクトリーツリー」と呼ぶ
- 一番上の「/」をルートディレクトリと呼ぶ
- Windowsはドライブから入れ子構造が始まるのに対して、Linuxは一つのディレクトリ（/)から始まる
- ディレクトリごとに役割がある
  
---

## 13 【cdコマンド】ディレクトリを移動しよう

### cdコマンド

ディレクトリを移動するコマンド

- 何の略？
  change directory
- 書式
  cd [オプション] [ディレクトリ]
  オプションはあまり使われないので覚えなくても大丈夫
- 具体例
  
  ```bash
  $cd/home/taguchi/
  ```

### 特別なディレクトリの指定

カレントディレクトリ、親ディレクトリ、ホームディレクトリには特別な指定方法がある

| ディレクトリ | 意味 | 指定方法 |
| :--- | :--- | :--- |
| カレントディレクトリ | 現在自分がいるディレクトリ | 「.」 |
| 親ディレクトリ | 一つ上の階層のディレクトリ | 「..」 |
| ホームディレクトリ | 「/home/ユーザー名」ディレクトリ | 「-」 |
| ルートディレクトリ | 「/」ディレクトリ | 「/」 |

---

## 14 【pwdコマンド】カレントディレクトリを表示しよう

### pwdコマンド

カレントディレクトリを表示するコマンド
今いるディレクトリを表示するコマンド

- 何の略？
  print name of working directory
- 書式
  pwd [オプション]
- 具体例
  
  ```bash
  $pwd
  /home/fukushima
  ```

---

## 15 【lsコマンド】ディレクトリの中身を表示しよう

### lsコマンド

- 何の略？
  list
- 書式
  ls [オプション] [ディレクトリ・ファイル名]
- 具体例
  
  ```bash
  $ls /
  bin dev home lib64 mnt

  # 複数のディレクトリを指定することもできる
  $ls //dev
  /:
  bin dev home lib64 mnt
  /dev:
  autofs block bsg bus
  ```

### 便利なパス名展開

パス名展開を使うと複数のファイルを一度に指定できる

- パス名展開
  - *：任意の文字列
  - ?：任意の一文字
- 具体例
  
  ```bash
  # 拡張子がhtmlのファイルの一覧を表示
  $ls *.html
  index.html home.html job.html

  # zから始まり4文字で終わるファイルを表示
  $ls /bin/z???
  /bin/zcat /bin/zcmp /bin/znew
  ```

### オプションでコマンドの動作を変えることができる

ハイフンになにかの記号を続ける形の引数をオプションと呼ぶ。  
コマンドにオプションを与えることで、コマンドの動作を変えることができる。  

- 書き方
  
  ```bash
  # コマンドの後ろにスペース区切りで指定する
  $ls -a

  # 2つ以上指定できる
  $ls -a -l
  $ls -al
  
  # オプションとコマンドの引数を同時に指定できる
  $ls -al /
  ```

### オプションでコマンドの動作を変えることが可能

- 書き方
  
  ```bash
  # オプションが引数を取ることもある
  $ls -w 10

  # 「--」で始まるロングオプションもある
  $ls --version
  ```

### よく使うオプション

- -l
  - ファイルの詳細情報を表示する
- -a
  - 隠しファイルも含めたすべてのファイルを表示する
  - .で始まるファイルは隠しファイルとみなして通常は表示されない
- -F
  - ファイル種別を表示する
  
---

## 16 【mkdirコマンド】ディレクトリを作成しよう

### mkdirコマンド

ディレクトリを作成するコマンド

- 何の略？
  - make directory
- 書式
  - mkdir [オプション] <作成するディレクトリ名>
- 具体例

  ```bash
  # codeディレクトリを作成する
  # ディレクトリ名は日本語だと文字化けすることがあるので英語で作成がおすすめ
  $mkdir code
  ```

### 深いディレクトリを一度に作成するオプション

- -p
  - 深いディレクトリを一度に作成する

    ```bash
    # -pオプションをつけると、test,2019というディレクトリを事前に作らなくていい
    $mkdir -p test/2019/08
    ```

---

## 17 【rmdirコマンド】ディレクトリを削除しよう

### rmdirコマンド

空のディレクトリを削除するコマンド

- 何の略？
  - remove directory
- 書式
  - rmdir <ディレクトリ名>
- 具体例
  
  ```bash
  # 空でないディレクトリを削除しようとするとエラーになる
  $rmdir code
  ```

---

## 18 パスについて学ぼう

### パスってなに

パスはディレクトリやファイルの住所情報  
ディレクトリの階層の区切りを「/」で表現する  

### 絶対パスと相対パス

- 絶対パス
  ルートディレクトリ（「/]）から始まるパス
  /home/kume/code/README.md
- 相対パス
  カレントディレクトリから始まるパス
  code/README.md

### 特別なディレクトリ表記

「.」はカレントディレクトリを表す。  
「..」は親ディレクトリを表す。  

### <18 まとめ>

- パスはディレクトリやファイルの住所情報
- ディレクトリの階層の区切りを「/」で表現する
- 絶対パスはルートディレクトリ（「/」）から始まるパス
- 相対パスはカレントディレクトリから始まるパス
- 「.」はカレントディレクトリを表す
- 「..」は親ディレクトリを表す

---

## 19 Day2のまとめ

- できるようになったこと
  - ディレクトリとパスの構造について理解した
  - cdコマンドでディレクトリを移動できるようになった
  - pwdコマンドでカレントディレクトリを確認できるようになった
  - lsコマンドでディレクトリの内容を表示できるようになった
  - mkdirコマンド、rmdirでディレクトリの作成・削除ができるようになった

- やってみよう
  - ルートディレクトリに移動してみよう
  - ルートディレクトリの下にある任意のディレクトリの中身を隠しファイルも含めて表示しよう
  - 下記コマンドを実行後、test1、test2のディレクトリを削除してみよう

    ```bash
    $cd ~/work/
    $mkdir test1
    $ls
    $mkdir test1/test2
    ```

---

## 20 コラム：コマンドの使い方を調べよう

### --helpオプションで、コマンドのヘルプメッセージを表示する  

- 書式
  <コマンド> --help
- 具体例
  
  ```bash
  # 使用方法、コマンドの概要、利用可能なオプション一覧を教えてくれる
  $ls --help
  ```

### manコマンドで、コマンドのマニュアルを表示する

- 何の略？
  - manual
- 書式
  - man <調べたいコマンド名>
- 具体例

  ```bash
  $man ls
  NAME
    ls -list directory contents
  
  $man -k move # キーワードから検索もできる
  ```

  ---

## 21 Day3のゴール

### Day3.ファイルを操作しよう

- day.3のゴール
- 【catコマンド】ファイルの中身を表示しよう
- 【lessコマンド】ファイルの中身をスクロールしよう
- テキストファイルについて学ぼう
- バイナリファイルについて学ぼう
- 【touchコマンド】ファイルを作成しよう
- 【rmコマンド】ファイルを削除しよう
- 【mvコマンド】ファイルの移動、ファイル名の変更をしよう
- 【cpコマンド】ファイル・ディレクトリをコピーしよう
- 【lnコマンド】リンクを貼ろう
- 【findコマンド】ファイルを検索しよう
  
### Day3.のゴール

- Linuxのファイルの仕組みを理解すること
- コマンドを使ってファイルを操作できるようになること
  - 【catコマンド】ファイルの中身を表示しよう
  - 【lessコマンド】ファイルの中身をスクロールしよう
  - 【touchコマンド】ファイルを作成しよう
  - 【rmコマンド】ファイルを削除しよう
  - 【mvコマンド】ファイルの移動、ファイル名の変更をしよう
  - 【cpコマンド】ファイル・ディレクトリをコピーしよう
  - 【lnコマンド】リンクを貼ろう
  - 【findコマンド】ファイルを検索しよう

---

## 22 【catコマンド】ファイルの中身を表示しよう

### catコマンド

ファイルの中身を表示するコマンド

- 何の略？
  - concatnate
- 書式
  - cat [オプション] <ファイル名>
- 具体例
  
  ```bash
  $cat/etc/hosts
  127.0.0.1 local
  ```

### オプションや使い方の注意

- -n
  - 行番号を表示するオプション
  
    ```bash
    # ファイルの詳細情報を表示
    $cat -n /etc/hosts
    1 127.0.0.1 localhost
    2 ::1 localhost6
    ```

- 使い方
  - 複数のファイルをまとめて集約することもできる
  
    ```bash
    # 一度に複数のファイルを指定するとファイルの内容が順に表示される
    $cat /etc/hostname etc/hosts
    local.localdomain
    ::1 localhost6
    ```

---

## 23 【lessコマンド】ファイルの中身をスクロールしよう

### lessコマンド

ファイルの中身をスクロール表示するコマンド  
長いファイルの中身を見たい時に使うコマンド  

- 何の略？
  - less - opposite of more
- 書式
  - less [オプション] <ファイル名>
- 具体例

  ```bash
  $less /etc/vimrc
  if v:lang =~ ...
  ```

### スクロールの操作

| コマンド | 内容 |
| :--- | :--- |
| スペースキー, f | 一番画面下にスクロール |
| b | 一番画面上にスクロール |
| j | 一行下にスクロール |
| k | 一行上にスクロール |
| q | lessコマンドを終了 |

### 検索の操作

| コマンド | 内容 |
| :--- | :--- |
| /<文字列> | 下方向に向かって検索 |
| ?<文字列> | 上方向に向かって検索 |
| n | 次の検索結果に移動 |
| N | 前の検索結果に移動 |

---

## 24 テキストファイルについて学ぼう

### テキストファイルってなに

テキストファイルとは文字列が書かれたファイルのこと  

- 詳細
  - テキストファイルは文字列コードで定められた文字だけが並んで格納されているファイル
  - 文字コードとは、文字をコンピュータで処理したり通信したりするために文字の種類に数値を割り振ったもの
  - 例：Aは1000001、Bは1000010など
  - Linuxではテキストファイルはとても大切。OSに関わるほとんどの設定情報をテキストファイルとして管理している

---

## 25 バイナリファイルについて学ぼう

### バイナリファイルってなに

バイナリファイルとは、画像ファイルや音声ファイル、実行ファイルなど

- 詳細
  - 文字コード以外の数値も含むようなファイルをバイナリファイルと呼ぶ
  - テキスト以外のファイルがバイナリファイルと考えてOk
  - catコマンドなどでバイナルファイルが文字化けするのは、無理やりテキストファイルとして解釈しようとして、文字コードに該当した数値をその文字に置き換えて表示したので意味不明の文字列になったため

---

## 26 【touchコマンド】ファイルを作成しよう

### touchコマンド

空のファイルを作成するコマンド

- 何の略？
  - touch
- 書式
  - touch <新規ファイル名1> <新規ファイル名2> ...
- 具体例

  ```bash
  # ファイル名が存在していないときは空のファイル作成、存在しているときはタイプスタンプを更新
  $touch README.md
  ```

---

## 27 【rmコマンド】ファイルを削除しよう

### rmコマンド

ファイル・ディレクトリを削除するコマンド

- 何の略？
  - remove
- 書式
  - rm [オプション] <削除するファイル名1> <削除するファイル名2> ...
- 具体例

  ```bash
  # rmコマンドを実行すると、ゴミ箱に行くのではなく本当に削除されるので気をつける
  $rm README.md
  ```

### rm よく使うオプション

- -r
  - ディレクトリも合わせて削除する
  
    ```bash
    # ディレクトリの中のファイルやディレクトリもまとめて削除される
    $rm -r dir
    ```

- f
  - ファイルを削除する際に警告文を表示しない
  
    ```bash
    $rm -f file
    ```

- i
  - ファイルの削除前に確認する

    ```bash
    $rm -i file
    ```

---

## 28【mvコマンド】ファイルの移動、ファイル名の変更をしよう

### mvコマンド

ファイルの移動、ファイル名を変更するコマンド  

- 何の略？
  - move
- 書式
  - mv [オプション] <移動元> ... <移動先>
- 具体例
  
  ```bash
  $mkdir dir
  $touch file

  # ファイル名を変更
  $mv file file1

  # ファイルを移動
  $mv file1 dir/
  ```

### mv オプション

- -i
  - 上書きする前に確認する

    ```bash
    $mv -i file file1
    ```

---

## 29 【cpコマンド】ファイル・ディレクトリをコピーしよう

### cpコマンド

ファイル・ディレクトリをコピーするコマンド

- 何の略？
  - copy
- 書式
  - cp [オプション] <コピー元> ... <コピー先>
- 具体例
  
  ```bash
  # ファイルをコピー
  $cp file new_file

  # ファイルをディレクトリ内にコピー
  # コピー先のファイルがすでにあると上書きされるので気をつける
  $cp file dir
  ```

### cp オプション

- -i
  - 上書きする前に確認する
  
    ```bash
    $cp -i file new_file
    ```

- -r
  - ディレクトリをコピーする

    ```bash
    $cp -r dir new_dir
    ```

---

## 30 【lnコマンド】リンクをはろう

### リンクをはるとはどいうことか

Linuxではファイルに別名をつけることができ、別名をつけることを  
「リンクをはる」という。Windowsで言うショートカットのようなもの

- ハードリンク
  - 1つのファイルの実体に複数の名前を付ける機能
  - 元のファイルを削除しても消えない
  - すべてのハードリンクがなくなった時に削除される
- シンボリックリンク
  - リンク先のパス名が書かれた特殊ファイル。リンク先がファイルの実体
  - シンボリックリンクを残したままファイルの実体を削除したり、ファイルを移動すると、ファイルを参照できなくなる

### lnコマンド

リンクをはるコマンド

- 何の略？
  - link
- 書式
  - in [オプション] <リンク元ファイル名> <リンク名>
- 具体例
  
  ```bash
  # ハードリンクをはる
  # オプションを何もつけないとハードリンクになる
  $ln file1 file2
  ```

### ln オプション

- -s
  - シンボリックリンクをはる

    ```bash
    $ln -s file1 file3
    ```

### リンクをどういうときに使うのか

- 長いパス名を省略したいとき
- 複数バージョンを共存させ最新を区別したいとき
  
※ハードリンクとシンボリックリンクだと、シンボリックリンクのほうが使うことが多い。ハードリンクはいくつか制限があって、異なるディスクをまたいで作成できなかったり、ディレクトリに対して使えない。  

---

## 31 【findコマンド】ファイルを検索しよう

### findコマンド

ファイルを検索するコマンド

- 何の略？
  - find
- 書式
  - find <検索開始ディレクトリ> <検索条件> <アクション>
- 具体例

  ```bash
  # ファイルがどこにあるか探す時findコマンドを使うと便利
  $find . -name README.md -print

  ./wordpress/.../README.md
  ```

### よく使われる検索条件

- name
  - ファイル名を指定してファイルを検索。ファイル名の大文字小文字は区別する

    ```bash
    # *は任意の文字列に一致する。?も使えて任意の一文字に一致する
    $find . -name README.md -print

    # ワイルドカードが使える。*を使って指定する時は''で囲うこと
    $find . -name '*.html' -print
    ```

- -iname
  - ファイル名を指定してファイルを検索。ファイル名の大文字小文字は区別しない

    ```bash
    $find . -iname readme.md
    ```

- -type
  - ファイルの種類で検索

    ```bash
    # -type f は通常のファイル
    $find . -type f -print

    # -type l はシンボリックリンク
    $find . -type l -print

    # -type d はディレクトリ
    $find . -type d -print
    ```
  
- -a
  - 複数の検索条件を指定。なお、-aは省略可能

    ```bash
    $find . -type -a -name images -print
    ```

---

## 32 Day3のまとめ

- できるようになったこと
  - テキストファイルとバイナリファイルについて理解した
  - ファイルの中身を表示できるようになった
  - ファイルを作成できるようになった
  - ファイルの削除ができるようになった
  - ファイルの移動ができるようになった
  - ファイルをコピーできるようになった
  - リンクをはれるようになった
  - ファイルを検索できるようになった

- やってみよう
  - index.htmlという空ファイルを作成してみよう
  
    ```bash
    $cd ~/work
    $touch index.html
    ```

  - index.htmlの名前をhome.htmlに変更してみよう

    ```bash
    $mv index.html home.html
    ```

  - publicというディレクトリを作成し、その中にpractice.txtというファイルを作成しよう

    ```bash
    $mkdir public
    $cd public/
    $touch practice.txt
    ```

  - findコマンドを使って上記で作成したpractice.txtファイルを見つけよう
  
    ```bash
    $find . -name practice.txt -print
    ```

  - Day3で作成した全ファイル・ディレクトリを削除しよう

    ```bash
    $rm -r ~/work
    ```

---

## 33 標準入出力のゴール

### 標準入出力とパーミッションについて学ぼう

- 標準入出力
  - 標準入出力のゴール
  - 標準入出力について学ぼう
  - 【>】リダイレクトについて学ぼう
  - /dev/nullについて学ぼう
  - 【|】パイプラインについて学ぼう
  - 標準入出力のまとめ
- パーミッション
  - パーミッションのゴール
  - ファイルのオーナーとグループについて学ぼう
  - ファイルのパーミッションについて学ぼう
  - 【chmodコマンド】ファイルモードを変更しよう
  - スーパーユーザーについて学ぼう
  - パーミッションのまとめ

### 標準入出力のゴール

- 入出力の仕組みを理解すること
- 複数のコマンドを連携できるようになること
  - リダイレクトを使って標準入出力先を変更しよう
  - パイプラインを使って複数のコマンドを連携しよう

---

## 34 標準入出力について学ぼう

### 標準入出力とは

標準入出力というのは、プログラムが特に何も指定されていない場合に利用するデータの標準的な入出力元

### 標準入力、標準出力、標準エラー出力

標準入力、標準出力、標準エラー出力の3つを合わせて標準入出力と呼ぶ  
Linuxではコマンドの入出力を抽象化することで入出力先を柔軟に変更できる

- 標準入力
  - プログラムの標準の入力
  - キーボードが通常は使われる
- 標準出力
  - プログラムの標準の出力
  - ディスプレイが通常は使われる
- 標準エラー出力
  - プログラムのエラーメッセージを出力する
  - ディスプレイが通常は使われる

---

## 35 【>】リダイレクトについて学ぼう

### 【>】リダイレクトとは

リダイレクトというのは入出力先を変更する機能

- 入力のリダイレクト
  - キーボードの代わりにファイルから入力する方法

    ```bash
    # /etc/hostsファイルを入力元にしてcatコマンドを実行
    $cat < /etc/hosts
    1 127.0.0.1 localhost
    2 ::1 localhost6
    ```

- 出力のリダイレクト
  - コマンドの実行結果を画面に表示するのではなくファイルに保存する機能

    ```bash
    #lsコマンドの出力先をls.txtにして保存
    $ls > output.txt
    $cat > output.txt
    ダウンロード　ドキュメント
    ```

### エラー出力のリダイレクト

出力とエラー出力は別で、エラー出力は「2>」を使う  

- 標準入出力の数値
  - 標準入出力などをOSが認識するために用いる識別子
    | 入出力 | 数値 |
    | :--- | :--- |
    | 標準入力 | 0 |
    | 標準出力 | 1 |
    | 標準エラー出力 | 2 |
- エラー入力のリダイレクト
  - エラー結果を画面に表示するのではなくファイルに保存する機能

    ```bash
    $ls /hoge 2>error.txt
    $cat error.txt
    ls: /hogeにアクセスできません:
    ```

### リダイレクトのその他の使用方法

- 出力とエラー出力をまとめる
  - まとめる場合は、出力をリダイレクトしたあとに「2>&1」と書く

    ```bash
    $ls //hoge > output.txt 2>&1
    $cat output.txt
    ls: /hoge にアクセスできません:
    bin boot dev etc home lib
    ```

- リダイレクトで追記する
  - 「>」でリダイレクト指定するとファイルを上書きする
  - 「>>」でリダイレクト指定するとファイルに追記する

    ```bash
    $echo Hello! >> output.txt
    ```

---

## 36 /dev/nullについて学ぼう

### /dev/nullとはなにか

入力先として指定しても何も返さず、出力先として指定してもデータは消え何も表示されない、スペシャルファイル  

- 入力先として指定
  - 入力が何もない状態になる
  - コマンドのテストなどで入力を空にしたい時に使用する

    ```bash
    $cat < /dev/null
    $        #何も表示されない
    ```

- 出力先として指定
  - 結果が何も表示されない
  - 結果が大量にあり、結果を非表示にしたい時に使用する

    ```bash
    $ls / > /dev/null
    $      #何も表示されない

---

## 37 【|】パイプラインについて学ぼう

### パイプラインとは

複数のコマンドを連携させる機能  
コマンドの標準出力を別のコマンドの標準入力につなげる

- 書式
  - コマンド | コマンド
- 具体例

  ```bash
  # コマンドを複数つなげる。grepは指定した文字列で検索して該当するものを表示するコマンド。結果を絞りたい時によく使う
  $ls /bin | less

  $ls /bin | grep systemd | less
  ```

---

## 38 標準入出力のまとめ

### 標準入出力のまとめ

- できるようになったこと
  - 標準入力、標準出力、標準エラー出力について理解した
  - 標準入出力をファイルに変更できるようになった
  - 入出力先に/dev/nullを指定できるようになった
  - パイプラインを使って複数のコマンドをつなげられるようおになった
- やってみよう
  - wcコマンドは入力元の行数、語数、文字数を計算して左から順に出力します。wcコマンドを使って　/bin ディレクトリの行数をカウントしてください

    ```bash
    $ls /bin | wc
    ```

  - /etcディレクトリにhostという文字列を含む語の数をカウントしてください

    ```bash
    $ls /etc | grep host | wc
    ```

---

## 39 パーミッションのゴール

- パーミッション
  - パーミッションのゴール
  - ファイルのオーナーとグループについて学ぼう
  - ファイルのパーミッションについて学ぼう
  - 【chmodコマンド】ファイルモードを変更しよう
  - スーパーユーザーについて学ぼう
  - パーミッションのまとめ

### パーミッションのゴール

- ファイルの権限管理ができるようになり、システムを安全に管理・使用できるようになること
  - ファイルのオーナーとグループの概念を理解しよう
  - ファイルの権限を確認・設定できるようになろう
  - 管理者権限でコマンドを実行できるようになろう

---

## 40 ファイルのオーナーとグループについて学ぼう

### ファイルのオーナーとグループ

ファイルには全てのオーナー（所有者）とグループ（所有グループ）が設定されていて、権限管理されている  

- 詳細
  - 前提：Linuxではユーザごとにアカウントを発行する
  - オーナー：ファイルの所有者
  - グループ：ファイルの所有グループ。ユーザをグループに所属させ、グループに権限を与えることで、複数ユーザの権限を一括で管理できるようにする
- 確認方法
  - ls -|コマンドでファイルのオーナーとグループが確認できる

    ```bash
    $ls -l /etc/less
    -rwxr-xr-x. 1 root root 158240 7月 31 2015 /bin/less
    ```

- 自分のユーザー名を確認する

  ```bash
  $id
  # uidが自分のIDと名前、gidがグループのIDとグループ名
  uid=1000(rie7013) gid=1000(rie7013) groups=1000(rie7013),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
  ```

- 全部のユーザを確認する

  ```bash
  # デフォルトでいろいろ動くように設定されている
  $cat /etc/passwd
  ```

---

## 41 ファイルのパーミッションについて学ぼう

### パーミッションとは

ファイルやディレクトリを「誰がどのように操作できるか」を定めたもの  

- 確認方法
  - ls -l コマンドでファイルやディレクトリのパーミッションが確認できる

    ```bash
    $ls -l /bin/less
    # -（ファイルタイプ - 通常ファイル、D ディレクトリ、l シンボリックリンク）
    # rwx（オーナーのパーミッション）
    # r-x（グループのパーミッション）
    # r-x（その他のユーザのパーミッション）
    -rwxr-xr-x. 1 root root 158240 7月 31 2015 /bin/less
    ```

- 詳細
  - パーミッションの記号
    | 記号 | 内容 |
    | :--- | :--- |
    | r | read（読み取り） |
    | w | write（書き込み） |
    | x | execut（実行） |
  - rwxr-xr-xだと
    | 対象 | 読み取り | 書き込み | 実行 |
    | :--- | :--- | :--- | :--- |
    | オーナー | ○ | ○ | ○ |
    | グループに属するユーザ | ○ | × | ○ |
    | その他のユーザ | ○ | × | ○ |

Linuxは人は間違えるとして、最初は権限強めになっている  

---

## 42 【chmodコマンド】ファイルモードを変更しよう

### chmodコマンド（シーエッチモッドコマンド）

ファイルやディレクトリのパーミッションを設定する  

- 何の略？
  - change mode
- 書式
  - chmod [ugoa] [+-=] [rwx] <ファイル名>
- 詳細
    | 記号 | 内容 |
    | :--- | :--- |
    | u | 所有者の権限 |
    | g | グループの権限 |
    | o | その他のユーザの権限 |
    | a | 全ユーザの権限 |
    | + | 権限を追加 |
    | - | 権限を削除 |
    | = | 記述した権限にする |
- 具体例

  ```bash
  $chmod u+r file
  ```

### chmodコマンド（数値で指定）

- 書式
  - chmod <8進数の数値> <ファイル名>
- 詳細
    | パーミッション | 数値 |
    | :--- | :--- |
    | r（読み取り） | 4 |
    | w（書き込み）| 2 |
    | x（実行） | 1 |

    | オーナー | グループ | その他 |
    | :--- | :--- | :--- |
    | rwx→421→7 | r-x→41→5 | r-x→41→5 |
- 具体例

  ```bash
  # 通常の指定は相対指定、数値指定は絶対指定
  $chmod 755 file
  ```

---

## 43 スーパーユーザについて学ぼう

### スーパーユーザとは

管理者権限を持つ特別なユーザがスーパーユーザ  
（ようするにrootユーザのこと）  

- 背景
  - システムの根幹に関わる作業が誰にでもできると危険
  - そのため、システムの根幹に関わる作業はスーパーユーザ（root）だけができるようにしている
- コマンド
  - コマンドの前にsudo（スドゥ）をつけるとスーパーユーザとしてコマンド実行

    ```bash
    sudo <コマンド>
    ```

- 何の略？
  - swhich user and do
- 具体例

  ```bash
  $sudo mkdir /storage
  ```

---

## 44 パーミッションのまとめ

- できるようになったこと
  - ファイルやディレクトリのオーナーとグループの概念を理解した
  - ファイルやディレクトリのパーミッションを確認できるようになった
  - ファイルやディレクトリのパーミッションを設定できるようになった
  - スーパーユーザ権限でコマンドを実行できるようになった
  
- やってみよう
  - ~/work/output.txt ファイルのパーミッションをrw-r--r--（オーナーは読み書きできてその他のユーザは読み取りのみ）に変更してください

    ```bash
    $chmod 644 output.txt
    ```

  - インストールしたgitをアンインストールしてください。yumコマンドの使い方はmanで確認して、難しい場合はネットで確認してみてください

    >yumコマンドがうまく動かないと思ったらUbuntuでは動かない模様

---
